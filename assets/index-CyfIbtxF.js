import{a as f,j as e,f as w,d as g,g as I,h as T,i as M,r as h,k,l as B}from"./index-B9o3PX-P.js";import{H as E,a as F,F as S,b as A,I as O,u as P}from"./index-B_ef9mhW.js";const _=i=>i.cards.items,H=({cards:i,isToDo:o,handleOpenAdd:n,handleOpenEdit:s})=>{const d=f(),a=l=>{d(w(l))};return e.jsxs("ul",{className:"bg-gray-200 p-4 h-[800px] w-[400px] overflow-y-auto flex flex-col gap-[20px] items-center",children:[i&&i.map(l=>e.jsxs("li",{className:"bg-gray-300 w-full h-[200px] p-[20px] text-left relative",children:[e.jsx("p",{className:"font-medium mb-[20px]",children:l.title}),e.jsx("p",{children:l.description}),e.jsxs("div",{className:"absolute bottom-[20px] right-[20px] flex gap-2.5",children:[e.jsx("button",{type:"button",onClick:()=>s(l),children:e.jsx(E,{className:"w-[20px] h-[20px] hover:fill-blue-400"})}),e.jsx("button",{type:"button",onClick:()=>a(l._id),children:e.jsx(F,{className:"w-[20px] h-[20px] hover:fill-red-500"})})]})]},l._id)),o&&e.jsx("li",{className:"bg-gray-300 w-full h-[200px] relative",onClick:n,children:e.jsx(S,{className:"w-[20px] h-[20px] absolute top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]"})})]})},j=({isModalOpen:i,handleCloseModal:o,maxOrder:n,cardData:s})=>{const d=f(),a=g(A),l=r=>{r.preventDefault();const c=r.currentTarget,p=c.elements.namedItem("title"),x=c.elements.namedItem("description");if(s){const m={_id:s==null?void 0:s._id,boardId:s==null?void 0:s.boardId,title:p.value,description:x.value,status:s==null?void 0:s.status,order:s==null?void 0:s.order};d(I(m))}else if(a!==null&&n){const m={boardId:a._id,title:p.value,description:x.value,status:"ToDo",order:n+1};d(T(m))}c.reset(),o()};return i&&e.jsx("div",{className:"bg-[rgba(0,0,0,0.5)] fixed top-0 left-0 w-full h-dvh z-0 owerflow-hidden",onClick:o,children:e.jsxs("div",{className:"bg-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] rounded-xl p-5 min-h-[200px]",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl",children:"Card"}),e.jsx("button",{className:"inline-flex items-center",type:"button",onClick:o,children:e.jsx(O,{className:"w-6 h-6"})})]}),e.jsxs("form",{className:"mt-4 flex gap-3 flex-col",onSubmit:r=>l(r),children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{type:"text",name:"title",placeholder:"Enter cards`s title...",className:"border border-gray-400 rounded-sm p-3",defaultValue:s?s.title:""}),e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("input",{type:"text",name:"description",placeholder:"Enter cards`s description...",className:"border border-gray-400 rounded-sm p-3",defaultValue:s?s.description:""}),e.jsx("button",{type:"submit",className:"bg-gray-300 h-9 w-20 px-4 py-4 rounded-md text-sm inline-flex items-center justify-center self-end",children:"Send"})]})]})})},R=()=>{const o=M().id,n=f(),s=g(_),d=s.filter(t=>t.status==="ToDo"),a=d.reduce((t,u)=>u.order>t?u.order:t,0),l=s.filter(t=>t.status==="In Progress"),r=s.filter(t=>t.status==="Done"),{isOpen:c,openModal:p,closeModal:x}=P(!1),[m,b]=h.useState("add"),[N,y]=h.useState();h.useEffect(()=>{n(k(o))},[n,o]),h.useEffect(()=>{n(B(o))},[n,o]);const C=()=>{b("add"),p()},v=t=>{b("edit"),y(t),p()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"flex justify-between",children:["ToDo","In progress","Done"].map((t,u)=>e.jsxs("li",{className:"text-center",children:[e.jsx("h3",{className:"text-xl mb-2.5",children:t}),e.jsx(H,{cards:t==="ToDo"?d:t==="In progress"?l:r,isToDo:t==="ToDo",handleOpenAdd:C,handleOpenEdit:v})]},u))})}),m==="Add"?e.jsx(j,{isModalOpen:c,handleCloseModal:x,maxOrder:a}):e.jsx(j,{isModalOpen:c,handleCloseModal:x,cardData:N})]})};export{R as default};
